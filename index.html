<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>—à–∏–∑–æ—Ñ—Ä–µ–Ω–∏—è</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="style.css" />
  <style>
    /* –ö–∞—Ä—Ç–∞ */
    #map { 
      height: 100vh; 
      width: 100%; 
    }

    /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å –∫–Ω–æ–ø–æ–∫ (—Ç–µ–º–∞ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ) */
    .control-panel {
      position: fixed;
      top: 10px;
      right: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      z-index: 9999; /* –≤—Å–µ–≥–¥–∞ –ø–æ–≤–µ—Ä—Ö –∫–∞—Ä—Ç—ã */
    }

    .control-btn {
      background-color: rgba(255, 255, 255, 0.9);
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: 0.2s;
    }

    .control-btn:hover {
      background-color: rgba(200, 200, 200, 0.9);
    }

    .control-btn svg {
      display: block;
      stroke: #333;
      width: 20px;
      height: 20px;
    }

    /* –ü–∞–Ω–µ–ª—å —Å–ª–æ—ë–≤ –≤–Ω–∏–∑—É —Å–ø—Ä–∞–≤–∞ */
    .layers-panel {
      position: fixed;
      bottom: 10px;
      right: 10px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      background: rgba(255, 255, 255, 0.9);
      padding: 6px;
      border-radius: 6px;
      border: 1px solid #ccc;
      z-index: 9999; /* —Ç–æ–∂–µ –ø–æ–≤–µ—Ä—Ö –∫–∞—Ä—Ç—ã */
    }

    .layer-btn {
      padding: 4px 8px;
      cursor: pointer;
      border: 1px solid #999;
      border-radius: 4px;
      background: #f0f0f0;
      transition: 0.2s;
    }

    .layer-btn:hover {
      background: #ddd;
    }

    .layer-btn.active {
      background: #bbb;
      font-weight: bold;
    }

    /* –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ */
    .dark-theme {
      background-color: #1e1e1e;
      color: #ffffff;
    }

    /* –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ */
    .light-theme {
      background-color: #ffffff;
      color: #000000;
    }

    /* üì± –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ */
    @media (max-width: 768px) {
      .control-btn {
        padding: 12px;
      }
      .control-btn svg {
        width: 28px;
        height: 28px;
      }
      .layer-btn {
        padding: 10px 14px;
        font-size: 16px;
      }
    }
  </style>
</head>
<body>

<div id="map" class="dark-theme"></div>

<!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å –∫–Ω–æ–ø–æ–∫ -->
<div class="control-panel">
  <button class="control-btn" id="theme-btn" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="12" cy="12" r="5"/>
      <line x1="12" y1="1" x2="12" y2="3"/>
      <line x1="12" y1="21" x2="12" y2="23"/>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
      <line x1="1" y1="12" x2="3" y2="12"/>
      <line x1="21" y1="12" x2="23" y2="12"/>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
    </svg>
  </button>

  <a href="images/photo_2025-08-13_21-06-28.jpg" download class="control-btn" title="–°–∫–∞—á–∞—Ç—å .pdn">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
      <polyline points="7 10 12 15 17 10"/>
      <line x1="12" y1="15" x2="12" y2="3"/>
    </svg>
  </a>
</div>

<!-- –ü–∞–Ω–µ–ª—å —Å–ª–æ—ë–≤ -->
<div class="layers-panel" id="layers-panel"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  // –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã
  let map = L.map('map', { crs: L.CRS.Simple, minZoom: -4, maxZoom: 2 });
  let mapBounds = [[0, 0], [10000, 15000]];
  map.fitBounds(mapBounds);

  // –ë–∞–∑–æ–≤—ã–π —Å–ª–æ–π
  let fictionCountries = L.imageOverlay('images/fiction_countries.png', mapBounds).addTo(map);

  // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–ª–æ–∏
  let foto = L.imageOverlay('images/foto.png', mapBounds);
  let layer13 = L.imageOverlay('images/layer13.png', mapBounds);
  let cityNames = L.imageOverlay('images/city_names.png', mapBounds, {opacity: 0.8});
  let countryNames = L.imageOverlay('images/country_names.png', mapBounds, {opacity: 0.8});
  let divisions = L.imageOverlay('images/divisions.png', mapBounds);
  let infrastructure = L.imageOverlay('images/infrastructure.png', mapBounds);
  let realWorld = L.imageOverlay('images/real_world.png', mapBounds, {opacity: 0.3});
  
  // –ü–æ—Ä—è–¥–æ–∫ –Ω–∞–ª–æ–∂–µ–Ω–∏—è —Å–ª–æ—ë–≤
  let overlayOrder = [
    fictionCountries,
    realWorld,
    infrastructure,
    divisions,
    countryNames,
    cityNames,
    layer13,
    foto
  ];

  // –û–±—ä–µ–∫—Ç —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
  let overlayMap = {
    "–§–æ—Ç–æ": foto,
    "–®–∞—Ä 13": layer13,
    "–ù–∞–∑–≤–∏ –º—ñ—Å—Ç": cityNames,
    "–ù–∞–∑–≤–∏ –∫—Ä–∞—ó–Ω": countryNames,
    "–î–∏–≤—ñ–∑—ñ—ó": divisions,
    "–Ü–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞": infrastructure,
    "–†–µ–∞–ª—å–Ω–∏–π —Å–≤—ñ—Ç": realWorld,
  };

  // –ü–∞–Ω–µ–ª—å —Å–ª–æ—ë–≤
  const layersPanel = document.getElementById('layers-panel');

  Object.keys(overlayMap).forEach(name => {
    let btn = document.createElement('button');
    btn.className = 'layer-btn';
    btn.textContent = name;

    btn.addEventListener('click', () => {
      let layer = overlayMap[name];
      if(map.hasLayer(layer)) {
        map.removeLayer(layer);
        btn.classList.remove('active');
      } else {
        map.addLayer(layer);
        btn.classList.add('active');
        // –ü–µ—Ä–µ—Å—Ç–∞–≤–ª—è–µ–º —Å–ª–æ–∏
        overlayOrder.forEach(l => {
          if(map.hasLayer(l)) l.bringToFront();
        });
      }
    });

    layersPanel.appendChild(btn);
  });

  // –ö–Ω–æ–ø–∫–∞ —Ç–µ–º—ã
  const themeButton = document.getElementById('theme-btn');
  const mapDiv = document.getElementById('map');
  themeButton.addEventListener('click', () => {
    if(mapDiv.classList.contains('light-theme')) mapDiv.classList.replace('light-theme','dark-theme');
    else mapDiv.classList.replace('dark-theme','light-theme');
  });

  // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã
  map.setMaxBounds(mapBounds);
</script>

</body>
</html>
